<html><head>
<title>JS OTP Demo</title>
<style>
    body {
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
</style>
</head>
<body style="width: 45em;">

<p id="secret"> </p>
<h2 id="code-1"></h2>

<h1 id="jsotp-demo">JS OTP Demo</h1>
<p>Javascript Implementation of 2 Factor Auth</p>



<p id="secret-2">Secret: </p>
<h2 id="code-2">HOTP code</h2>
<p>Counter value is: <span id="counter"></span></p>
<button onclick="requestHotp()">Get new code</button>


<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
   <!-- Style The Contact Form How Ever You Prefer -->
   
   <link rel="stylesheet" href="https://cdn.rawgit.com/dwyl/learn-to-send-email-via-google-script-html-no-server/master/style.css">

  
  <form id="gform" method="POST" class="pure-form pure-form-stacked" data-email="mrzanderzim@gmail.com"
  action="https://script.google.com/macros/s/AKfycbyH7FEitTSwjHqGn6R6QtXoliIHANrU3Vu-fIgypg0aU-LOoWM/exec">
    <!-- change the form action to your script url -->

   
    <fieldset class="pure-group">
      <label for="message">Message: </label>
      <textarea id="code-2" name="message" rows="10" value= "requestHotp()"
      placeholder="secret code"></textarea>
    </fieldset>

    <fieldset class="pure-group">
      <label for="email"><em>Your</em> Email Address:</label>
      <input id="email" name="email" type="email" value=""
      required placeholder="your.name@email.com"/>
      <span id="email-invalid" style="display:none">
        Must be a valid email address</span>
    </fieldset>

   

    <button class="button-success pure-button button-xlarge">
      <i class="fa fa-paper-plane"></i>&nbsp;Send</button>

  </form>

  <!-- Customise the Thankyou Message People See when they submit the form: -->
  <div style="display:none;" id="thankyou_message">
    <h2><em>Thanks</em> for contacting us!
      We will get back to you soon!</h2>
  </div>

  <!-- Submit the Form to Google Using "AJAX" -->
  <script data-cfasync="false" type="text/javascript"
  src="https://cdn.rawgit.com/dwyl/learn-to-send-email-via-google-script-html-no-server/master/form-submission-handler.js"></script>
  <!-- <script data-cfasync="false" type="text/javascript"
  src="/form-submission-handler.js"></script> -->
<!-- END -->


<script src="dist/jsOTP.min.js"></script>

<script>
$ = function(sel) {
  return document.querySelector(sel);
};


var hotp = new jsOTP.hotp();
var doge = hotp.getOtp(secret, 0);


var counter = 0;
var secret2 = "abcdefghijklmnop";
$('#secret-2').innerText = "Secret: " + secret2;
$('#counter').innerText = counter;

var updateHotp = function(secret, counter, el) {
  el.innerText = hotp.getOtp(secret, counter);
}
var updateCounter = function(counter, el) {
  el.innerText = counter;
}
var requestHotp = function() {
  updateHotp(secret2, counter, $('#code-2'));
  updateCounter(++counter, $('#counter'));
}

</script>

</body></html>
